(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/1am":function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableAfterReordering=void 0;var i,n=(0,r("hij8").customAttribute)("reorderable-after-reordering")(i=function(){})||i;t.ReorderableAfterReordering=n},"1MhN":function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableRepeat=void 0;var i,n,o,s,a,d,u,l,h,c,p,v=r("3U8n"),f=r("X5gX"),g=r("hij8"),m=r("aurelia-templating-resources"),b=r("Usnb"),w=r("aMET"),_=r("aurelia-event-aggregator"),y=r("K/SW"),E=(i=r("Ox4H"))&&i.__esModule?i:{default:i},I=r("cYbj");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,r,i,n){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var S=0,C=function(){var e={};function t(t){var r=e[t];return r?r.lastIndex=0:e[t]=r=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),r}return{add:function(e,r){var i=e.className;i.length?t(r).test(i)||(e.className+=" "+r):e.className=r},rm:function(e,r){e.className=e.className.replace(t(r)," ").trim()}}}(),T=(n=(0,g.customAttribute)("reorderable-repeat"),o=(0,v.inject)(_.EventAggregator,y.TaskQueue,f.BindingEngine,w.DndService,g.BoundViewFactory,g.TargetInstruction,g.ViewSlot,g.ViewResources,f.ObserverLocator,b.ReorderableRepeatStrategyLocator,I.ReorderableGroupMap),n(s=(0,g.templateController)(s=o((p=function(e){var t,r;function i(t,r,i,n,o,s,a,p,v,g,b){var w;if(R(w=e.call(this,{local:"item",viewsRequireLifecycle:(0,m.viewsRequireLifecycle)(o)})||this,"items",d,x(w)),R(w,"local",u,x(w)),R(w,"intention",l,x(w)),R(w,"patchedItems",h,x(w)),R(w,"type",c,x(w)),w.repeaterId=S,w.type=w.repeaterId,S+=1,w.ea=t,w.taskQueue=r,w.bindingEngine=i,w.dndService=n,w.viewFactory=o,w.instruction=s,w.viewSlot=a,w.lookupFunctions=p.lookupFunctions,w.observerLocator=v,w.strategyLocator=g,w.groupMap=b,w.ignoreMutation=!1,w.sourceExpression=(0,m.getItemsSourceExpression)(w.instruction,"reorderable-repeat.for"),w.sourceExpression instanceof f.BindingBehavior)throw new Error("BindingBehavior is not supported in reorderable-repeat");if(w.sourceExpression instanceof f.ValueConverter)throw new Error("ValueConverter is not supported in reorderable-repeat");if((0,m.isOneTime)(w.sourceExpression))throw new Error("oneTime binding is not supported in reorderable-repeat");return w.viewsRequireLifecycle=(0,m.viewsRequireLifecycle)(o),w.group=w._reorderableGroup(),w}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,M(t,r);var n=i.prototype;return n.call=function(e,t){this[e](this.items,t)},n.bind=function(e,t){var r=this;this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.arrayObserver=this.bindingEngine.collectionObserver(this.items).subscribe(this._itemsMutated.bind(this)),this._subsribers=[this.ea.subscribe("dnd:willStart",(function(){r.intention=null,r.views().forEach((function(e){C.rm(e.firstChild,"reorderable-repeat-reordering"),C.rm(e.firstChild,"reorderable-repeat-dragging-me")}))})),this.ea.subscribe("dnd:didCancel",(function(){r.intention=null,r.views().forEach((function(e){C.rm(e.firstChild,"reorderable-repeat-reordering"),C.rm(e.firstChild,"reorderable-repeat-dragging-me")}))})),this.ea.subscribe("dnd:didEnd",(function(){if(r.views().forEach((function(e){C.rm(e.firstChild,"reorderable-repeat-reordering"),C.rm(e.firstChild,"reorderable-repeat-dragging-me")})),r.intention){var e=r.intention,t=e.item,i=e.fromIndex,n=e.fromRepeaterId,o=e.toIndex,s=e.toRepeaterId;r.intention=null;var a=(0,E.default)(r.repeaterId);if(!(a!==n&&a!==s||n===s&&i===o)){var d={item:t,fromIndex:i,toIndex:o};a===n&&(r.items.splice(i,1),d.removedFromThisList=!0),a===s&&(r.items.splice(o,0,t),d.insertedToThisList=!0);var u=r._reorderableAfterReorderingFunc();u&&r.taskQueue.queueMicroTask((function(){u(r.items,d)}))}}})),this.ea.subscribe("reorderable-group:intention-changed",(function(e){e.type===(0,E.default)(r.type)&&(r.intention&&e.type===r.intention.type&&e.fromIndex===r.intention.fromIndex&&e.fromRepeaterId===r.intention.fromRepeaterId&&e.toIndex===r.intention.toIndex&&e.toRepeaterId===r.intention.toRepeaterId||(r.intention=e))}))],"string"==typeof this.group?this.type=this.group:this.group&&(this.group.targetProperty="type",this._typeBinding=this.group.createBinding(this),this._typeBinding.bind(this.scope)),this.patchedItems=[].concat(this.items),this.patchedItemsChanged()},n.unbind=function(){this.groupMap.remove(this),this._typeBinding&&(this._typeBinding.unbind(),delete this._typeBinding),this.arrayObserver&&(this.arrayObserver.dispose(),this.arrayObserver=null),this._subsribers.forEach((function(e){return e.dispose()})),this._subsribers=[],this.removeAllViews(!0,!0),this.scope=null,this.items=null,this.matcherBinding=null},n.intentionChanged=function(e){if(e){var t=(0,E.default)(this.repeaterId),r=e.item,i=e.fromIndex,n=e.fromRepeaterId,o=e.toIndex,s=e.toRepeaterId,a=[].concat(this.items);t===n&&a.splice(i,1),t===s&&a.splice(o,0,r),this.patchedItems=a}else this.patchedItems=[].concat(this.items)},n.itemsChanged=function(){this.scope&&(this.arrayObserver&&(this.arrayObserver.dispose(),this.arrayObserver=null),this.arrayObserver=this.bindingEngine.collectionObserver(this.items).subscribe(this._itemsMutated.bind(this)),null===this.intention?this.patchedItems=[].concat(this.items):this.intention=null)},n._itemsMutated=function(){null===this.intention?this.patchedItems=[].concat(this.items):this.intention=null},n.patchedItemsChanged=function(){this._reload()},n.typeChanged=function(){this._reload()},n._reload=function(){var e=this;if(this.scope&&this.patchedItems){if(this.strategy=this.strategyLocator.getStrategy(this.patchedItems),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.strategy.instanceChanged(this,this.patchedItems),this.taskQueue.queueMicroTask((function(){e.groupMap.remove(e),e.views().forEach((function(t){e._unRegisterDnd(t),e._registerDnd(t)})),e.groupMap.add(e)}))}},n._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var e=this.viewFactory.viewFactory.instructions,t=Object.keys(e),r=0;r<t.length;r++){var i=e[t[r]].expressions;if(i)for(;r<i.length;r++)if("matcher"===i[0].targetProperty){var n=i[0];return i.splice(0,1),n}}},n.viewCount=function(){return this.viewSlot.children.length},n.views=function(){return this.viewSlot.children},n.view=function(e){return this.viewSlot.children[e]},n.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},n.addView=function(e,t){var r=this.viewFactory.create();r.bind(e,t),this.viewSlot.add(r)},n.insertView=function(e,t,r){var i=this.viewFactory.create();i.bind(t,r),this.viewSlot.insert(e,i)},n.moveView=function(e,t){this.viewSlot.move(e,t)},n.removeAllViews=function(e,t){var r=this;return this.views().forEach((function(e){return r._unRegisterDnd(e)})),this.viewSlot.removeAll(e,t)},n.removeViews=function(e,t,r){var i=this;return e.forEach((function(e){return i._unRegisterDnd(e)})),this.viewSlot.removeMany(e,t,r)},n.removeView=function(e,t,r){return this._unRegisterDnd(this.view(e)),this.viewSlot.removeAt(e,t,r)},n.updateBindings=function(e){for(var t=e.bindings.length;t--;)(0,m.updateOneTimeBinding)(e.bindings[t]);for(t=e.controllers.length;t--;)for(var r=e.controllers[t].boundProperties.length;r--;){var i=e.controllers[t].boundProperties[r].binding;(0,m.updateOneTimeBinding)(i)}},n._additionalAttribute=function(e,t){return e&&e.firstChild&&e.firstChild.au&&e.firstChild.au[t]?e.firstChild.au[t].instruction.attributes[t]:this._getPlainAttribute(t)},n._getPlainAttribute=function(e){if(this.viewFactory&&this.viewFactory.viewFactory){var t=this.viewFactory.viewFactory.template.firstChild;if(t&&t.hasAttribute(e))return t.getAttribute(e)}},n._reorderableGroup=function(){if(this.viewFactory&&this.viewFactory.viewFactory){var e=this.viewFactory.viewFactory.template.firstChild.getAttribute("au-target-id"),t=this.viewFactory.viewFactory.instructions[e];if(t){var r=t.behaviorInstructions.find((function(e){return"reorderable-group"===e.attrName}));if(r){var i=r.attributes&&r.attributes["reorderable-group"];if(i&&"function"==typeof i.createBinding)return i}}}return this._getPlainAttribute("reorderable-group")},n._reorderableDirection=function(e){var t=this._additionalAttribute(e,"reorderable-direction");return t&&t.sourceExpression&&(t=t.sourceExpression.evaluate(this.scope)),"string"==typeof t&&t.toLowerCase()||"down"},n._dndHandlerSelector=function(e){var t=this._additionalAttribute(e,"reorderable-dnd-handler-selector");if(t&&t.sourceExpression&&(t=t.sourceExpression.evaluate(this.scope)),"string"==typeof t)return t},n._dndPreviewFunc=function(e){var t=this._additionalAttribute(e,"reorderable-dnd-preview");if(t){if("string"==typeof t){var r=(0,f.getContextFor)(t,this.scope),i=r[t];if("function"==typeof i)return i.bind(r);throw new Error("'reorderable-dnd-preview' must be a function or evaluate to a function")}if(t.sourceExpression)return function(e,r){return t.sourceExpression.evaluate(r)};throw new Error("'reorderable-dnd-preview' must be a function or evaluate to a function")}return null},n._reorderableAfterReorderingFunc=function(){var e=this,t=this._additionalAttribute(this.view(0),"reorderable-after-reordering");if(t){if("string"==typeof t){var r=(0,f.getContextFor)(t,this.scope),i=r[t];if("function"==typeof i)return i.bind(r);throw new Error("'reorderable-after-reordering' must be a function or evaluate to a function")}if(t.sourceExpression)return function(){return t.sourceExpression.evaluate(e.scope)};throw new Error("'reorderable-after-reordering' must be a function or evaluate to a function")}return null},n._dndHover=function(e,t,r){var i=(0,E.default)(this.repeaterId);if(!this.intention||this.intention.toRepeaterId!==i||this.intention.toIndex!==t){var n=this.dndService.model,o=e.mouseEndAt,s=e.targetElementRect,a=o.x-s.x,d=o.y-s.y;("left"===r?a>s.width/2:"right"===r?a<s.width/2:"up"===r?d>s.height/2:d<s.height/2)||!this.intention&&n.repeaterId===i&&t===n.index?this._updateIntention(t,!0):this._updateIntention(t,!1)}},n._registerDnd=function(e){var t,r=this,i=this.local,n=e.firstChild,o=e.bindingContext[i],s=e.overrideContext.$index,a=this._dndHandlerSelector(e);a&&(t=n.querySelector(a));var d=(0,E.default)(this.repeaterId),u=this._reorderableDirection(e),l=this._dndPreviewFunc(e);this.dndService.addSource({dndModel:function(){return{type:(0,E.default)(r.type),index:s,item:o,repeaterId:d}},dndPreview:l&&function(){return l(o,e)},dndElement:n},t&&{handler:t}),this.dndService.addTarget({dndElement:n,dndCanDrop:function(e){if(e.type!==(0,E.default)(r.type))return!1;var t,i=r.intention,o=e.repeaterId===d;return r.taskQueue.queueMicroTask((function(){C.add(n,"reorderable-repeat-reordering")})),i?t=i.toRepeaterId===d&&i.toIndex===s:o&&(t=e.index===s),t&&r.taskQueue.queueMicroTask((function(){C.add(n,"reorderable-repeat-dragging-me")})),!0},dndHover:function(e){r._dndHover(e,s,u)},dndDrop:function(){}})},n._unRegisterDnd=function(e){C.rm(e.firstChild,"reorderable-repeat-reordering"),C.rm(e.firstChild,"reorderable-repeat-dragging-me"),this.dndService.removeSource(e.firstChild),this.dndService.removeTarget(e.firstChild)},n._updateIntention=function(e,t){var r=this.dndService,i=r.isProcessing,n=r.model;if(i&&n.type===(0,E.default)(this.type)){var o=(0,E.default)(this.repeaterId),s=n.type!==n.repeaterId,a=n.repeaterId===o;if(!(e<0)){var d,u,l;if(a)if(this.intention)d=this.intention.fromIndex,u=this.intention.toIndex;else{if((d=n.index)<0)return;u=d}else if(this.intention&&this.intention.toRepeaterId===o)d=this.intention.fromIndex,u=this.intention.toIndex;else{if((d=n.index)<0)return;u=e}l=u<e?t?e-1:e:t?e:e+1,this.intention&&this.intention.fromIndex===d&&this.intention.fromRepeaterId===n.repeaterId&&this.intention.toIndex===l&&this.intention.toRepeaterId===o||(this.intention={type:n.type,item:n.item,fromIndex:d,fromRepeaterId:n.repeaterId,toIndex:l,toRepeaterId:o},s&&this.ea.publish("reorderable-group:intention-changed",this.intention))}}},i}(m.AbstractRepeater),d=P((a=p).prototype,"items",[g.bindable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=P(a.prototype,"local",[g.bindable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=P(a.prototype,"intention",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=P(a.prototype,"patchedItems",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=P(a.prototype,"type",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=a))||s)||s)||s);t.ReorderableRepeat=T},"3zcf":function(e,t,r){"use strict";t.__esModule=!0,t.SimpleArrayRepeatStrategy=void 0;var i=r("aurelia-templating-resources"),n=function(){function e(){}var t=e.prototype;return t.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},t.instanceChanged=function(e,t){e.removeAllViews(!0,!e.viewsRequireLifecycle);var r=t.length;t&&r>0&&this._standardProcessInstanceChanged(e,t)},t._standardProcessInstanceChanged=function(e,t){for(var r=0,n=t.length;r<n;r++){var o=(0,i.createFullOverrideContext)(e,t[r],r,n);e.addView(o.bindingContext,o)}},e}();t.SimpleArrayRepeatStrategy=n},HJyB:function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableDndPreview=void 0;var i,n=(0,r("hij8").customAttribute)("reorderable-dnd-preview")(i=function(){})||i;t.ReorderableDndPreview=n},Ox4H:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){return"bcx-aurelia-reorderable-repeat:"+e}},QmSO:function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableGroupFor=void 0;var i,n,o=r("3U8n"),s=r("hij8"),a=r("aMET"),d=r("aurelia-event-aggregator"),u=r("cYbj"),l=(i=r("Ox4H"))&&i.__esModule?i:{default:i};var h=(0,s.customAttribute)("reorderable-group-for")(n=(0,o.inject)(Element,d.EventAggregator,a.DndService,u.ReorderableGroupMap)(n=function(){function e(e,t,r,i){this.intention=null,this.element=e,this.ea=t,this.dndService=r,this.groupMap=i,this.resetIntention=this.resetIntention.bind(this)}var t=e.prototype;return t.bind=function(){var e=this,t=this.value;if(!Array.isArray(t))throw new Error('reorderable-group-for needs items to be an array. e.g. reorderable-group-for.bind="arrayModel"');this._subsribers=[this.ea.subscribe("dnd:willStart",(function(){var r=e.groupMap.get(t);r?(e.group=(0,l.default)(r.group()),e.repeaterId=(0,l.default)(r.repeaterId)):(e.group=null,e.repeaterId=null),e.resetIntention()})),this.ea.subscribe("dnd:didEnd",this.resetIntention),this.ea.subscribe("reorderable-group:intention-changed",(function(t){t.type===e.group&&(e.intention=t)}))]},t.unbind=function(){this._subsribers.forEach((function(e){return e.dispose()})),this._subsribers=[]},t.resetIntention=function(){this.intention=null},t.attached=function(){this.dndService.addTarget(this,{element:this.element})},t.detached=function(){this.dndService.removeTarget(this)},t.dndCanDrop=function(e){return e.type===this.group},t.dndHover=function(){if(this.repeaterId){var e=this.dnd,t=e.isHoveringShallowly,r=e.model;if(t){var i=r.type,n=r.index,o=r.item,s=r.repeaterId,a=this.value?this.value.length:0,d=r.repeaterId===this.repeaterId?a-1:a;this.intention&&this.intention.toRepeaterId===this.repeaterId||this.ea.publish("reorderable-group:intention-changed",{type:i,item:o,fromIndex:n,fromRepeaterId:s,toIndex:d,toRepeaterId:this.repeaterId})}}},t.dndDrop=function(){},e}())||n)||n;t.ReorderableGroupFor=h},Usnb:function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableRepeatStrategyLocator=void 0;var i=r("3zcf"),n=r("aurelia-templating-resources"),o=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy((function(e){if(e instanceof Array)return 0===e.length||"object"!=typeof e[0]}),new i.SimpleArrayRepeatStrategy),this.addStrategy((function(e){if(e instanceof Array)return e.length&&"object"==typeof e[0]}),new n.ArrayRepeatStrategy)}var t=e.prototype;return t.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},t.getStrategy=function(e){for(var t=this.matchers,r=0,i=t.length;r<i;++r)if(t[r](e))return this.strategies[r];return null},e}();t.ReorderableRepeatStrategyLocator=o},VPAL:function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableGroup=void 0;var i,n=(0,r("hij8").customAttribute)("reorderable-group")(i=function(){})||i;t.ReorderableGroup=n},WAf2:function(e,t,r){"use strict";t.__esModule=!0,t.defaultPreview=t.unknownTagPreview=t.liPreview=t.trPreview=void 0,t.trPreview=function(e){if("TR"===e.tagName&&e.parentNode&&e.parentNode.parentNode&&"TABLE"===e.parentNode.parentNode.tagName){for(var t=e.cloneNode(!0),r=e.childElementCount,i=0;i<r-1;i++){var n=getComputedStyle(e.children[i]);t.children[i].style.width=n.width,t.children[i].style.height=n.height}var o=e.parentNode,s=o.cloneNode();s.appendChild(t);var a=o.parentNode,d=a.cloneNode();d.appendChild(s);var u=getComputedStyle(a);return d.style.width=u.width,d}},t.liPreview=function(e){if("LI"===e.tagName&&e.parentNode){var t=e.parentNode.tagName;if("UL"===t||"OL"===t){var r=e.cloneNode(!0),i=getComputedStyle(e);r.style.width=i.width,r.style.height=i.height,r.style.flex="0 0 auto";var n=e.parentNode.cloneNode();return n.appendChild(r),n.style.width="auto",n.style.height="auto",n.style.listStyleType="none",n}}},t.unknownTagPreview=function(e){var t=getComputedStyle(e);if("inline"===t.display&&"auto"===t.width&&"auto"===t.height&&""===e.style.width&&""===e.style.height){for(var r=e.cloneNode(!0),i=e.childElementCount,n=0;n<i;n++){var o=getComputedStyle(e.children[n]);r.children[n].style.width=o.width,r.children[n].style.height=o.height}return r}},t.defaultPreview=function(e){var t=e.cloneNode(!0),r=getComputedStyle(e);return t.style.width=r.width,t.style.height=r.height,t}},aMET:function(e,t,r){"use strict";t.__esModule=!0,t.DndService=void 0;var i=r("aurelia-event-aggregator"),n=r("WAf2"),o=document,s=o&&o.documentElement,a=!1;var d=function(){var e={};function t(t){var r=e[t];return r?r.lastIndex=0:e[t]=r=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),r}return{add:function(e,r){var i=e.className;i.length?t(r).test(i)||(e.className+=" "+r):e.className=r},rm:function(e,r){e.className=e.className.replace(t(r)," ").trim()}}}();function u(e){var t=e;if(void 0!==t.touches)return t.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;var r=e;if(void 0!==r.buttons)return r.buttons;var i=r.button;return void 0!==i?1&i?1:2&i?3:4&i?2:0:void 0}function l(e){var t=e.getBoundingClientRect();return{x:t.left+h("scrollLeft","pageXOffset"),y:t.top+h("scrollTop","pageYOffset"),width:c(t),height:p(t)}}function h(e,t){return void 0!==window[t]?window[t]:s.clientHeight?s[e]:o.body[e]}function c(e){return e.width||e.right-e.left}function p(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===o?null:e.parentNode}function f(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(v(t))}(e)}function g(e,t){var r=function(e){var t=e;return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:e}(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in r)&&i[e]in r&&(e=i[e]),r[e]}var m=function(e,t){if(void 0===t&&(t={}),!e)throw new Error("Missing delegate for dnd source.");if("function"!=typeof e.dndModel)throw new Error("Missing dndModel() method on dnd source delegate.");if(this.delegate=e,t.element?this.element=t.element:this.element=e.dndElement,t.handler){if(!(t.handler instanceof Element))throw new Error("specified handler is not a DOM element");this.handler=t.handler}else this.handler=this.element;if(!(this.element instanceof Element))throw new Error("Missing dndElement or options.element on dnd source delegate.");this.noPreview=!!t.noPreview,this.hideCursor=!!t.hideCursor,this.centerPreviewToMousePosition=!!t.centerPreviewToMousePosition},b=function(e,t){if(void 0===t&&(t={}),!e)throw new Error("Missing delegate for dnd target.");if("function"!=typeof e.dndCanDrop)throw new Error("Missing dndCanDrop() method on delegate.");if("function"!=typeof e.dndDrop)throw new Error("Missing dndDrop() method on dnd target delegate.");if(this.delegate=e,t.element?this.element=t.element:this.element=e.dndElement,!(this.element instanceof Element))throw new Error("Missing dndElement or options.element on dnd target delegate.");"function"==typeof e.dndHover&&(this.dndHover=e.dndHover.bind(e))};function w(e,t){for(var r=t instanceof Element?function(e){return e.element===t}:function(e){return e.delegate===t},i=e.length,n=0;n<i;n+=1)if(r(e[n]))return n;return-1}var _=function(){function e(e){this.ea=e,this.dndSources=[],this.dndTargets=[],this.previewDrawers=[],function(){if(!a){a=!0;var e=o.createElement("style");e.innerHTML="\n/* bcx-aurelia-dnd styles */\n\n/*\nbcx-aurelia-dnd relies on html/body margin 0.\nYour css stack should have done this.\nAdded here as safe guard.\n*/\nhtml, body {\n  margin: 0;\n}\n\n.bcx-dnd-preview {\n  position: absolute !important;\n  margin: 0 !important;\n  z-index: 9999 !important;\n  opacity: 0.8;\n  box-shadow: 0 0 16px gray;\n}\n\n.bcx-dnd-preview .bcx-dnd-preview-hide {\n  visibility: hidden !important;\n}\n\n.bcx-dnd-hide {\n  display: none !important;\n}\n\n.bcx-dnd-hide-cursor .bcx-dnd-preview {\n  cursor: none !important;\n}\n\n.bcx-dnd-unselectable {\n  -webkit-user-select: none !important;\n  -moz-user-select: none !important;\n  -ms-user-select: none !important;\n  user-select: none !important;\n}\n",e.type="text/css",o.head.childNodes.length>0?o.head.insertBefore(e,o.head.childNodes[0]):o.head.appendChild(e)}}(),this.addPreviewDrawer(n.defaultPreview),this.addPreviewDrawer(n.unknownTagPreview),this.addPreviewDrawer(n.liPreview),this.addPreviewDrawer(n.trPreview),this._grab=this._grab.bind(this),this._release=this._release.bind(this),this._startBecauseMouseMoved=this._startBecauseMouseMoved.bind(this),this._preventGrabbed=this._preventGrabbed.bind(this),this._drag=this._drag.bind(this),this._esc=this._esc.bind(this),s.addEventListener("mousedown",this._grab),s.addEventListener("touchstart",this._grab,{passive:!1}),s.addEventListener("mouseup",this._release),s.addEventListener("touchend",this._release)}return e.prototype.addPreviewDrawer=function(e){this.previewDrawers.unshift(e)},e.prototype.addSource=function(e,t){void 0===t&&(t={}),this.dndSources.push(new m(e,t))},e.prototype.removeSource=function(e){var t=w(this.dndSources,e);t>=0&&this.dndSources.splice(t,1)},e.prototype.addTarget=function(e,t){void 0===t&&(t={}),e.dnd={isProcessing:!1};var r=new b(e,t);if(this.isProcessing){var i=r.delegate.dndCanDrop(this.model),n=r.delegate.dnd;n.canDrop=i,n.isProcessing=!0,n.model=this.model}this.dndTargets.push(r)},e.prototype.removeTarget=function(e){var t=w(this.dndTargets,e);t>=0&&(this.dndTargets[t].delegate.dnd=null,this.dndTargets.splice(t,1))},e.prototype._sourceOf=function(e){var t=function(e,t){for(var r=e.length,i=0;i<r;i+=1)if(e[i].handler===t)return i;return-1}(this.dndSources,e);return t>=0?this.dndSources[t]:void 0},e.prototype._startListeningEventualMovements=function(){s.addEventListener("mousemove",this._startBecauseMouseMoved),s.addEventListener("touchmove",this._startBecauseMouseMoved,{passive:!1}),this._element&&this._element.addEventListener("touchmove",this._startBecauseMouseMoved,{passive:!1}),this._element&&this._element.addEventListener("touchend",this._release,{passive:!1})},e.prototype._stopListeningEventualMovements=function(){s.removeEventListener("mousemove",this._startBecauseMouseMoved),s.removeEventListener("touchmove",this._startBecauseMouseMoved),this._element&&this._element.removeEventListener("touchmove",this._startBecauseMouseMoved)},e.prototype._startListeningMovements=function(){s.addEventListener("selectstart",this._preventGrabbed),s.addEventListener("click",this._preventGrabbed),s.addEventListener("keydown",this._esc),s.addEventListener("mousemove",this._drag),s.addEventListener("touchmove",this._drag,{passive:!1}),this._element&&this._element.addEventListener("touchmove",this._drag,{passive:!1})},e.prototype._stopListeningMovements=function(){s.removeEventListener("selectstart",this._preventGrabbed),s.removeEventListener("click",this._preventGrabbed),s.removeEventListener("keydown",this._esc),s.removeEventListener("mousemove",this._drag),s.removeEventListener("touchmove",this._drag),this._element&&this._element.removeEventListener("touchmove",this._drag),this._element&&this._element.removeEventListener("touchend",this._release)},e.prototype._preventGrabbed=function(e){this._grabbed&&e.preventDefault()},e.prototype._grab=function(e){if(this._moveX=g("clientX",e),this._moveY=g("clientY",e),!(1!==u(e)||e.metaKey||e.ctrlKey)){var t=e.target;this._element=t;var r=this._startingSource(t);r&&(this._grabbed=r,this._startListeningEventualMovements(),"mousedown"===e.type&&f(t)?t.focus():e.preventDefault())}},e.prototype._ungrab=function(){this._grabbed=void 0,this._stopListeningEventualMovements(),this._stopListeningMovements(),this._element=void 0},e.prototype._release=function(e){if(this._ungrab(),this.isProcessing){this.ea&&this.ea.publish("dnd:willEnd");var t=this._landingTargets(e).shallowTarget;t&&t.delegate.dndDrop(this._locationInfo(t.element,e)),this._cleanup(),this.ea&&this.ea.publish("dnd:didEnd")}},e.prototype._startingSource=function(e){if(!this.isProcessing){for(var t;e&&e;){var r=this._sourceOf(e);if(r&&("function"!=typeof r.delegate.dndCanDrag||r.delegate.dndCanDrag())){t=r;break}e=v(e)}return t}},e.prototype._startBecauseMouseMoved=function(e){if(this._grabbed)if(0!==u(e)){var t=g("clientX",e),r=g("clientY",e);if(void 0===t||t!==this._moveX||void 0===r||r!==this._moveY)if(!f(o.elementFromPoint(t,r))){var i=this._grabbed;this._stopListeningEventualMovements(),this._startListeningMovements(),this.isProcessing&&this._cleanup(),this._start(i),this._sourceElementRect=l(this._sourceElement),this._offsetX=g("pageX",e)-this._sourceElementRect.x,this._offsetY=g("pageY",e)-this._sourceElementRect.y,this._renderPreviewImage(),this._drag(e)}}else this._cleanup()},e.prototype._start=function(e){var t=this;this.ea&&this.ea.publish("dnd:willStart"),this.isProcessing=!0,this.model=e.delegate.dndModel(),this._sourceElement=e.element,e.noPreview?this._noPreview=!0:e.delegate.dndPreview&&(this._sourcePreview=e.delegate.dndPreview(this.model)),this._noPreview||(e.hideCursor&&(this._hideCursor=!0),e.centerPreviewToMousePosition&&(this._centerPreviewToMousePosition=!0)),this.dndTargets.forEach((function(e){var r=e.delegate.dndCanDrop(t.model),i=e.delegate.dnd;i.canDrop=r,i.isProcessing=!0,i.model=t.model})),this.ea&&this.ea.publish("dnd:didStart")},e.prototype._cleanup=function(){this._ungrab(),this._removePreviewImage(),this.isProcessing=void 0,this.model=void 0,this._sourceElement=void 0,this._noPreview=void 0,this._hideCursor=void 0,this._centerPreviewToMousePosition=void 0,this._sourcePreview=void 0,this._sourceElementRect=void 0,this._offsetX=0,this._offsetY=0,this.dndTargets.forEach((function(e){var t=e.delegate.dnd;t.canDrop=void 0,t.isProcessing=void 0,t.isHoveringShallowly=void 0,t.isHovering=void 0,t.model=void 0}))},e.prototype._landingTargets=function(e){var t;if(!this.isProcessing)return{shallowTarget:null,possibleTargets:[]};for(var r,i=g("clientX",e),n=g("clientY",e),s=this.dndTargets.filter((function(e){if(e.delegate.dnd.canDrop){var t=e.element.getBoundingClientRect();return t.left<=i&&t.right>=i&&t.top<=n&&t.bottom>=n}})),a=function(e,t,r){var i="";e&&(i=e.className,e.className+=" bcx-dnd-hide");var n=o.elementFromPoint(t,r);return e&&(e.className=i),n}(this._preview,i,n);!r&&a;){var d=w(s,a);d>=0?r=s[d]:a=v(a)}return r?s.splice(s.indexOf(r),1):s.length>0&&(r=(t=s)[0],s=t.slice(1)),{shallowTarget:r,possibleTargets:s}},e.prototype._drag=function(e){var t=this;if(this.isProcessing){e.preventDefault(),this._updatePreviewLocation(e);var r=this._landingTargets(e),i=r.shallowTarget,n=r.possibleTargets;this.dndTargets.forEach((function(r){var o=r.delegate.dnd;o.isProcessing&&(r===i?(o.isHoveringShallowly=!0,o.isHovering=!0,r.dndHover&&r.dndHover(t._locationInfo(r.element,e))):n.indexOf(r)>=0?(o.isHoveringShallowly=!1,o.isHovering=!0,r.dndHover&&r.dndHover(t._locationInfo(r.element,e))):(o.isHoveringShallowly=!1,o.isHovering=!1))}))}},e.prototype._esc=function(e){this.isProcessing&&"Escape"===e.key&&(e.preventDefault(),this._cleanup(),this.ea&&this.ea.publish("dnd:didCancel"))},e.prototype._updatePreviewLocation=function(e){if(this._preview){var t=g("pageX",e),r=g("pageY",e);if(this._centerPreviewToMousePosition){var i=this._preview.getBoundingClientRect(),n=c(i),o=p(i);this._preview.style.left=t-Math.floor(n/2)+"px",this._preview.style.top=r-Math.floor(o/2)+"px"}else this._preview.style.left=t-this._offsetX+"px",this._preview.style.top=r-this._offsetY+"px"}},e.prototype._locationInfo=function(e,t){var r,i={x:this._sourceElementRect.x+this._offsetX,y:this._sourceElementRect.y+this._offsetY},n=g("pageX",t),o=g("pageY",t),s={x:n,y:o},a=l(e);return r=this._preview?l(this._preview):{x:n-this._offsetX,y:o-this._offsetY,width:this._sourceElementRect.width,height:this._sourceElementRect.height},{mouseStartAt:i,mouseEndAt:s,sourceElementRect:this._sourceElementRect,targetElementRect:a,previewElementRect:r}},e.prototype._renderPreviewImage=function(){if(!this._preview&&!this._noPreview){var e=!!this._sourcePreview;if(e)this._preview=this._sourcePreview,this._sourcePreview=void 0;else{var t=this._sourceElement;if(!t)return;for(var r=0;r<this.previewDrawers.length&&(this._preview=this.previewDrawers[r](t),!this._preview);r++);if(!this._preview)return}d.add(this._preview,"bcx-dnd-preview"),o.body.appendChild(this._preview),d.add(o.body,"bcx-dnd-unselectable"),e||"rgba(0, 0, 0, 0)"!==getComputedStyle(this._preview).backgroundColor||(this._preview.style.backgroundColor="white"),this._hideCursor&&d.add(o.body,"bcx-dnd-hide-cursor")}},e.prototype._removePreviewImage=function(){this._preview&&(d.rm(o.body,"bcx-dnd-unselectable"),d.rm(o.body,"bcx-dnd-hide-cursor"),v(this._preview).removeChild(this._preview),this._preview=null)},e}();t.DndService=_,_.inject=[i.EventAggregator]},"b+hS":function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableDndHandlerSelector=void 0;var i,n=(0,r("hij8").customAttribute)("reorderable-dnd-handler-selector")(i=function(){})||i;t.ReorderableDndHandlerSelector=n},"bcx-aurelia-reorderable-repeat":function(e,t,r){"use strict";t.__esModule=!0,t.configure=function(e){i.DOM.injectStyles("\n.reorderable-repeat-dragging-me {\n  visibility: hidden;\n}\n"),e.globalResources([n.ReorderableRepeat,o.ReorderableDirection,s.ReorderableGroup,a.ReorderableGroupFor,d.ReorderableDndPreview,u.ReorderableDndHandlerSelector,l.ReorderableAfterReordering])};var i=r("70NS"),n=r("1MhN"),o=r("swQq"),s=r("VPAL"),a=r("QmSO"),d=r("HJyB"),u=r("b+hS"),l=r("/1am")},cYbj:function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableGroupMap=void 0;var i=function(){function e(){this._map=new WeakMap}var t=e.prototype;return t.add=function(e){var t=e.repeaterId,r=e.items;this._map.set(r,{group:function(){return e.type},repeaterId:t})},t.remove=function(e){var t=e.items;this._map.delete(t)},t.get=function(e){return this._map.get(e)},e}();t.ReorderableGroupMap=i},swQq:function(e,t,r){"use strict";t.__esModule=!0,t.ReorderableDirection=void 0;var i,n=(0,r("hij8").customAttribute)("reorderable-direction")(i=function(){})||i;t.ReorderableDirection=n}}]);
//# sourceMappingURL=vendors~115a7c0a.fcfe7c9d1763e0f81e98.bundle.map